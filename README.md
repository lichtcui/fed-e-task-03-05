# 1、Vue 3.0 性能提升主要是通过哪几方面体现的？

### 响应式系统升级

使用 Proxy，可监听

- 动态新增的属性
- 删除的属性
- 数组的索引和 length 属性

### 优化编译过程

标记和提升所有的静态根节点，diff 只需要对比动态节点内容

- Fragments，模版中不需要创建唯一根节点，可直接放文本
- 静态提升，静态节点提升到外部，只有在初始化时才会被创建一次，render 时不需要再次创建节点
- Patch flag 标记节点，在编译时跳过这些静态根节点，只更新动态节点内容
- 缓存事件处理函数，减少不必要的更新操作

### 源码体积优化

- 移除了一些不常用的 API
- Tree-shaking

# 2、Vue 3.0 所采用的 Composition Api 与 Vue 2.x 使用的 Options Api 有什么区别？

逻辑代码全部封装在函数内部，不会分散在不同的位置，也方便重用，类似 react hooks

# 3、Proxy 相对于 Object.defineProperty 有哪些优点？

- 性能比 defineProperty 好
- 可以拦截访问，赋值，删除等操作
- 不需要初始化时遍历所有属性，有多层属性嵌套的时候，才会递归处理下一级属性
- 可以默认监听到动态添加的属性，数组的索引及 length 属性

# 4、Vue 3.0 在编译方面有哪些优化？

- 利用 ESModule 特性省略打包，不需要打包直接开启 web 服务器
- 对于需要编译的文件，按需编译，服务器端编译并把编译结果返回给浏览器，模块也是在服务器端处理
- HMR 立即编译当前修改文件，（不会以当前文件为入口重新 build，依赖也会重新加载）

# 5、Vue.js 3.0 响应式系统的实现原理？

- Proxy 实现属性监听
- 多层属性嵌套，在访问属性过程中处理下一级属性
- 监听动态添加属性
- 监听属性删除
- 监听数组索引和 length 属性
- 可以作为单独模块使用
